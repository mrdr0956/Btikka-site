<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ù…ØªØ¬Ø± Ø¨ØªÙƒØ© - Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… GitHub</title>
    <style>
        :root {
            --primary: #6f42c1;
            --secondary: #0d6efd;
            --success: #198754;
            --danger: #dc3545;
            --warning: #ffc107;
            --dark: #212529;
            --light: #f8f9fa;
            --github: #24292e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            border-radius: 15px;
            padding: 25px 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            text-align: center;
            border-bottom: 5px solid var(--primary);
        }
        
        .header h1 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .header p {
            color: #666;
            font-size: 16px;
        }
        
        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
        .tabs {
            display: flex;
            background: white;
            border-radius: 10px 10px 0 0;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 0;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            flex: 1;
            padding: 18px 20px;
            border: none;
            background: #f8f9fa;
            color: #666;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            min-width: 180px;
        }
        
        .tab-btn:hover {
            background: #e9ecef;
            color: var(--primary);
        }
        
        .tab-btn.active {
            background: white;
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        /* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            min-height: 500px;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… */
        .form-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid #dee2e6;
        }
        
        .form-card h3 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #dee2e6;
            font-size: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
            font-size: 15px;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 0.25rem rgba(111, 66, 193, 0.25);
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a32a3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(111, 66, 193, 0.3);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #157347;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(25, 135, 84, 0.3);
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background: #bb2d3b;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }
        
        .btn-warning {
            background: var(--warning);
            color: var(--dark);
        }
        
        .btn-warning:hover {
            background: #ffca2c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.3);
        }
        
        /* ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            font-size: 15px;
        }
        
        .alert-success {
            background-color: #d1e7dd;
            color: #0f5132;
            border-color: #badbcc;
        }
        
        .alert-danger {
            background-color: #f8d7da;
            color: #842029;
            border-color: #f5c2c7;
        }
        
        .alert-warning {
            background-color: #fff3cd;
            color: #664d03;
            border-color: #ffecb5;
        }
        
        /* Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
        .data-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
        }
        
        .data-item {
            padding: 15px 20px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .data-item:last-child {
            border-bottom: none;
        }
        
        .data-item:hover {
            background: #f8f9fa;
        }
        
        .data-info h4 {
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .data-info p {
            color: #666;
            font-size: 14px;
            margin-bottom: 3px;
        }
        
        .data-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-sm {
            padding: 8px 15px;
            font-size: 14px;
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
        .search-bar {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .status-badge.ads {
            background: #d1e7dd;
            color: #0f5132;
        }
        
        .status-badge.else {
            background: #cfe2ff;
            color: #084298;
        }
        
        /* Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header-control {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .mode-display {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }
        
        .mode-status {
            font-weight: bold;
        }
        
        /* Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© */
        .backup-section {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 24px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                padding: 15px;
                text-align: center;
                min-width: auto;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .form-card {
                padding: 20px;
            }
            
            .status-bar {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .data-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .data-actions {
                width: 100%;
                justify-content: flex-end;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
        <div class="header">
            <h1>ğŸ›ï¸ Ø¥Ø¯Ø§Ø±Ø© Ù…ØªØ¬Ø± Ø¨ØªÙƒØ©</h1>
            <p>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ù…ØªØµÙ„Ø© Ø¨Ù€ GitHub</p>
        </div>
        
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© -->
        <div class="status-bar">
            <div class="status-item">
                <span>ğŸŒ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„:</span>
                <span id="connectionStatus">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</span>
            </div>
            <div class="status-item">
                <span>ğŸ“ ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª:</span>
                <span id="headerModeStatus" class="status-badge">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
            </div>
            <div class="status-item">
                <button class="btn btn-success btn-sm" onclick="testGitHubConnection()">ğŸ”— Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„</button>
                <button class="btn btn-warning btn-sm" onclick="downloadBackup()">ğŸ“¥ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©</button>
            </div>
        </div>
        
        <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="dashboard">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
            <button class="tab-btn" data-tab="products">ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
            <button class="tab-btn" data-tab="shops">ğŸª Ø§Ù„Ù…Ø­Ù„Ø§Øª</button>
            <button class="tab-btn" data-tab="ads">â­ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</button>
            <button class="tab-btn" data-tab="settings">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        </div>
        
        <!-- ØªØ¨ÙˆÙŠØ¨ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
        <div id="dashboard" class="tab-content active">
            <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
            <div class="form-card">
                <h3>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ØªØ¬Ø±</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div style="text-align: center; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
                        <div style="font-size: 40px; margin-bottom: 10px;">ğŸ“¦</div>
                        <div style="font-size: 32px; font-weight: bold;" id="totalProducts">0</div>
                        <div style="color: #666;">Ù…Ù†ØªØ¬</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
                        <div style="font-size: 40px; margin-bottom: 10px;">ğŸª</div>
                        <div style="font-size: 32px; font-weight: bold;" id="totalShops">0</div>
                        <div style="color: #666;">Ù…Ø­Ù„</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
                        <div style="font-size: 40px; margin-bottom: 10px;">â­</div>
                        <div style="font-size: 32px; font-weight: bold;" id="totalAds">0</div>
                        <div style="color: #666;">Ø¥Ø¹Ù„Ø§Ù†</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
                        <div style="font-size: 40px; margin-bottom: 10px;">ğŸ”„</div>
                        <div style="font-size: 20px; font-weight: bold;" id="lastUpdate">-</div>
                        <div style="color: #666;">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</div>
                    </div>
                </div>
            </div>
            
            <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø³Ø±ÙŠØ¹ -->
            <div class="form-card">
                <h3>âš¡ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <button class="btn btn-success" onclick="loadProducts()">
                        ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                    </button>
                    <button class="btn btn-success" onclick="loadShops()">
                        ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­Ù„Ø§Øª
                    </button>
                    <button class="btn btn-success" onclick="loadAds()">
                        ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                    </button>
                    <button class="btn btn-primary" onclick="reloadAllData()">
                        ğŸ“¥ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ„ Ù…Ù† GitHub
                    </button>
                </div>
            </div>
            
            <div id="dashboardMessage" class="alert" style="display: none;"></div>
        </div>
        
        <!-- ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
        <div id="products" class="tab-content">
            <!-- Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ -->
            <div class="form-card">
                <h3>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
                <form id="addProductForm">
                    <div class="form-group">
                        <label for="productSection">Ø§Ù„Ù‚Ø³Ù… *</label>
                        <select class="form-control" id="productSection" required>
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                            <option value="ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª">ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª</option>
                            <option value="ğŸ—ï¸ Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø¥Ø¹Ù…Ø§Ø± ÙˆØªØ´Ø·ÙŠØ¨">ğŸ—ï¸ Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø¥Ø¹Ù…Ø§Ø± ÙˆØªØ´Ø·ÙŠØ¨</option>
                            <option value="ğŸ’Š Ø·Ø¨ÙŠØ© ÙˆÙ…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„">ğŸ’Š Ø·Ø¨ÙŠØ© ÙˆÙ…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„</option>
                            <option value="ğŸ›ï¸ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª â€“ Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©">ğŸ›ï¸ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª â€“ Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©</option>
                            <option value="âš¡ Ø£Ø¯ÙˆØ§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ">âš¡ Ø£Ø¯ÙˆØ§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ</option>
                            <option value="ğŸ”Œ Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©">ğŸ”Œ Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</option>
                            <option value="ğŸ½ï¸ Ø§Ø¯ÙˆØ§Øª Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ©">ğŸ½ï¸ Ø§Ø¯ÙˆØ§Øª Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ©</option>
                            <option value="ğŸ Ù‡Ø¯Ø§ÙŠØ§">ğŸ Ù‡Ø¯Ø§ÙŠØ§</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="shopField" style="display: none;">
                        <label for="productShop">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ù„ *</label>
                        <select class="form-control" id="productShop">
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ù„</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="productName">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ *</label>
                        <input type="text" class="form-control" id="productName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="productPrice">Ø§Ù„Ø³Ø¹Ø± (Ù„.Ø³) *</label>
                        <input type="number" class="form-control" id="productPrice" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="productType">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬ *</label>
                        <input type="text" class="form-control" id="productType" placeholder="Ù…Ø«Ø§Ù„: Ø­Ù„ÙˆÙŠØ§ØªØŒ Ù…Ø´Ø±ÙˆØ¨Ø§ØªØŒ Ø£Ø¯ÙˆÙŠØ©..." required>
                    </div>
                    
                    <div class="form-group">
                        <label for="productDescription">ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬</label>
                        <textarea class="form-control" id="productDescription" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="productPhoto">Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© *</label>
                        <input type="url" class="form-control" id="productPhoto" placeholder="https://example.com/image.jpg" required>
                    </div>
                    
                    <div id="productMessage" class="alert" style="display: none;"></div>
                    
                    <button type="button" class="btn btn-primary" onclick="addProduct()">
                        <span id="productBtnText">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬</span>
                        <div class="loading" id="productLoading" style="display: none;"></div>
                    </button>
                </form>
            </div>
            
            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
            <div class="form-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>ğŸ“‹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
                    <button class="btn btn-success btn-sm" onclick="loadProducts()">
                        ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                    </button>
                </div>
                
                <div class="search-bar">
                    <input type="text" class="search-input" id="searchProduct" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..." onkeyup="searchProducts()">
                </div>
                
                <div id="productsList" class="data-list"></div>
            </div>
        </div>
        
        <!-- ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ù„Ø§Øª -->
        <div id="shops" class="tab-content">
            <!-- Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„ -->
            <div class="form-card">
                <h3>ğŸª Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„ Ø¬Ø¯ÙŠØ¯</h3>
                <form id="addShopForm">
                    <div class="form-group">
                        <label for="shopSection">Ø§Ù„Ù‚Ø³Ù… *</label>
                        <select class="form-control" id="shopSection" required>
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                            <option value="ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª">ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª</option>
                            <option value="ğŸ—ï¸ Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø¥Ø¹Ù…Ø§Ø± ÙˆØªØ´Ø·ÙŠØ¨">ğŸ—ï¸ Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø¥Ø¹Ù…Ø§Ø± ÙˆØªØ´Ø·ÙŠØ¨</option>
                            <option value="ğŸ’Š Ø·Ø¨ÙŠØ© ÙˆÙ…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„">ğŸ’Š Ø·Ø¨ÙŠØ© ÙˆÙ…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="shopName">Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„ *</label>
                        <input type="text" class="form-control" id="shopName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="shopType">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­Ù„ *</label>
                        <input type="text" class="form-control" id="shopType" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø·Ø¹Ù… Ø¹Ø±Ø¨ÙŠØŒ ØµÙŠØ¯Ù„ÙŠØ©..." required>
                    </div>
                    
                    <div class="form-group">
                        <label for="shopDescription">ÙˆØµÙ Ø§Ù„Ù…Ø­Ù„ *</label>
                        <textarea class="form-control" id="shopDescription" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="shopPhoto">Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ù„ *</label>
                        <input type="url" class="form-control" id="shopPhoto" placeholder="https://example.com/shop.jpg" required>
                    </div>
                    
                    <div id="shopMessage" class="alert" style="display: none;"></div>
                    
                    <button type="button" class="btn btn-primary" onclick="addShop()">
                        <span id="shopBtnText">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„</span>
                        <div class="loading" id="shopLoading" style="display: none;"></div>
                    </button>
                </form>
            </div>
            
            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ù„Ø§Øª -->
            <div class="form-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>ğŸ“‹ Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
                    <button class="btn btn-success btn-sm" onclick="loadShops()">
                        ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                    </button>
                </div>
                
                <div class="search-bar">
                    <input type="text" class="search-input" id="searchShop" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø­Ù„..." onkeyup="searchShops()">
                </div>
                
                <div id="shopsList" class="data-list"></div>
            </div>
        </div>
        
        <!-- ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª -->
        <div id="ads" class="tab-content">
            <!-- Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù† -->
            <div class="form-card">
                <h3>â­ Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯</h3>
                <form id="addAdForm">
                    <div class="form-group">
                        <label for="adName">Ø§Ø³Ù… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† *</label>
                        <input type="text" class="form-control" id="adName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="adDescription">ÙˆØµÙ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† *</label>
                        <textarea class="form-control" id="adDescription" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="adPhoto">Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† *</label>
                        <input type="url" class="form-control" id="adPhoto" placeholder="https://example.com/ad.jpg" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="adLinkType">Ù†ÙˆØ¹ Ø§Ù„Ø±Ø¨Ø· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                        <select class="form-control" id="adLinkType">
                            <option value="">Ø¥Ø¹Ù„Ø§Ù† Ø¹Ø§Ø¯ÙŠ</option>
                            <option value="shop">Ø±Ø¨Ø· Ø¨Ù…Ø­Ù„</option>
                            <option value="product">Ø±Ø¨Ø· Ø¨Ù…Ù†ØªØ¬</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="adLinkField" style="display: none;">
                        <label id="adLinkLabel">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ù„/Ø§Ù„Ù…Ù†ØªØ¬</label>
                        <select class="form-control" id="adLinkId">
                            <option value="">-- Ø§Ø®ØªØ± --</option>
                        </select>
                    </div>
                    
                    <div id="adMessage" class="alert" style="display: none;"></div>
                    
                    <button type="button" class="btn btn-primary" onclick="addAd()">
                        <span id="adBtnText">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</span>
                        <div class="loading" id="adLoading" style="display: none;"></div>
                    </button>
                </form>
            </div>
            
            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª -->
            <div class="form-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>ğŸ“‹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
                    <button class="btn btn-success btn-sm" onclick="loadAds()">
                        ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                    </button>
                </div>
                
                <div class="search-bar">
                    <input type="text" class="search-input" id="searchAd" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¥Ø¹Ù„Ø§Ù†..." onkeyup="searchAds()">
                </div>
                
                <div id="adsList" class="data-list"></div>
            </div>
        </div>
        
        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
        <div id="settings" class="tab-content">
            <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù‡ÙŠØ¯Ø± -->
            <div class="form-card">
                <h3>âš™ï¸ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h3>
                <div class="header-control">
                    <div class="mode-display">
                        <span>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</span>
                        <span id="currentHeaderMode" class="mode-status">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
                    </div>
                    
                    <div id="headerModeMessage" class="alert" style="display: none; width: 100%;"></div>
                    
                    <button type="button" class="btn btn-primary" onclick="toggleHeaderMode()" id="toggleHeaderBtn">
                        <span id="toggleBtnText">ğŸ”„ ØªØ¨Ø¯ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</span>
                        <div class="loading" id="headerModeLoading" style="display: none;"></div>
                    </button>
                    
                    <div style="font-size: 14px; color: #666; text-align: center;">
                        <strong>ads</strong>: ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø±<br>
                        <strong>else</strong>: Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø±
                    </div>
                </div>
            </div>
            
            <!-- Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© -->
            <div class="form-card">
                <h3>ğŸ“¥ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©</h3>
                <p>ØªØ­Ù…ÙŠÙ„ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</p>
                
                <div class="backup-section">
                    <button class="btn btn-success" onclick="downloadBackup()">
                        ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
                    </button>
                    <button class="btn btn-warning" onclick="downloadJson('products.json', products)">
                        ğŸ“¦ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                    </button>
                    <button class="btn btn-warning" onclick="downloadJson('shops.json', shops)">
                        ğŸª ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ù„Ø§Øª
                    </button>
                    <button class="btn btn-warning" onclick="downloadJson('ads.json', ads)">
                        â­ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                    </button>
                </div>
                
                <div style="margin-top: 15px; font-size: 14px; color: #666;">
                    Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¨ØµÙŠØºØ© JSON ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªÙŠØ±Ø§Ø¯Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ========== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª GitHub (Ù†ÙØ³ Ø§Ù„Ø¨ÙˆØª) ==========
        const GITHUB_TOKEN = "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";
        const REPO_OWNER = "mrdr0956";
        const REPO_NAME = "Btikka-site";
        const BRANCH = "main";
        
        // Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù„ÙØ§Øª (Ù†ÙØ³ Ø§Ù„Ø¨ÙˆØª)
        const PRODUCTS_FILE = "products.json";
        const SHOPS_FILE = "shops.json";
        const ADS_FILE = "ads.json";
        const SETTINGS_FILE = "settings.json";
        
        // ========== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ==========
        let products = [];
        let shops = [];
        let ads = [];
        let settings = { header_mode: "ads" };
        
        // Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ Ù…Ø­Ù„Ø§Øª
        const SHOP_REQUIRED_SECTIONS = [
            'ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª',
            'ğŸ—ï¸ Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø¥Ø¹Ù…Ø§Ø± ÙˆØªØ´Ø·ÙŠØ¨',
            'ğŸ’Š Ø·Ø¨ÙŠØ© ÙˆÙ…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„'
        ];
        
        // ========== Ø¯ÙˆØ§Ù„ GitHub API (Ù…Ø´Ø§Ø¨Ù‡Ø© Ù„Ù„Ø¨ÙˆØª) ==========
        async function readFromGitHub(filename) {
            try {
                const url = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${filename}?ref=${BRANCH}`;
                
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `Bearer ${GITHUB_TOKEN}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (response.status === 404) {
                    console.log(`ğŸ“­ Ù…Ù„Ù ${filename} ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯`);
                    // Ø¥Ø±Ø¬Ø§Ø¹ Ù‚ÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù
                    if (filename === SETTINGS_FILE) {
                        return { header_mode: "ads" };
                    }
                    return [];
                }
                
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Ø®Ø·Ø£ ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                // ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± base64 (Ù…Ø«Ù„ Python)
                const content = atob(data.content.replace(/\s/g, ''));
                
                try {
                    return JSON.parse(content);
                } catch (parseError) {
                    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ JSON:`, parseError);
                    // Ø¥Ø±Ø¬Ø§Ø¹ Ù‚ÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù
                    if (filename === SETTINGS_FILE) {
                        return { header_mode: "ads" };
                    }
                    return [];
                }
                
            } catch (error) {
                console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© ${filename}:`, error);
                throw error;
            }
        }
        
        async function saveToGitHub(filename, data) {
            try {
                // 1. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ SHA Ù„Ù„Ù…Ù„Ù Ø§Ù„Ø­Ø§Ù„ÙŠ
                const getUrl = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${filename}?ref=${BRANCH}`;
                const getResponse = await fetch(getUrl, {
                    headers: {
                        'Authorization': `Bearer ${GITHUB_TOKEN}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                let sha = null;
                if (getResponse.ok) {
                    const fileInfo = await getResponse.json();
                    sha = fileInfo.sha;
                }
                
                // 2. ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ JSON Ø«Ù… base64
                const jsonString = JSON.stringify(data, null, 2);
                const content = btoa(unescape(encodeURIComponent(jsonString)));
                
                // 3. Ø¥Ø¹Ø¯Ø§Ø¯ Ø±Ø³Ø§Ù„Ø© commit
                const commitMessage = sha 
                    ? `Update ${filename} - ${new Date().toLocaleString('ar-SA')}`
                    : `Create ${filename} - ${new Date().toLocaleString('ar-SA')}`;
                
                // 4. Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø­ÙØ¸
                const updateUrl = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${filename}`;
                const updateResponse = await fetch(updateUrl, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${GITHUB_TOKEN}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: commitMessage,
                        content: content,
                        sha: sha,
                        branch: BRANCH
                    })
                });
                
                if (!updateResponse.ok) {
                    const errorData = await updateResponse.json();
                    throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸: ${errorData.message || JSON.stringify(errorData)}`);
                }
                
                console.log(`âœ… ØªÙ… Ø­ÙØ¸ ${filename} Ø¨Ù†Ø¬Ø§Ø­`);
                return true;
                
            } catch (error) {
                console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ ${filename}:`, error);
                throw error;
            }
        }
        
        // ========== Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ==========
        document.querySelectorAll('.tab-btn').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                const tabId = button.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
                button.classList.add('active');
                
                if (tabId === 'products') {
                    loadProducts();
                } else if (tabId === 'shops') {
                    loadShops();
                } else if (tabId === 'ads') {
                    loadAds();
                } else if (tabId === 'settings') {
                    loadSettings();
                }
            });
        });
        
        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ==========
        async function loadInitialData() {
            try {
                updateConnectionStatus('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', 'warning');
                
                // ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ
                const [productsData, shopsData, adsData, settingsData] = await Promise.allSettled([
                    readFromGitHub(PRODUCTS_FILE),
                    readFromGitHub(SHOPS_FILE),
                    readFromGitHub(ADS_FILE),
                    readFromGitHub(SETTINGS_FILE)
                ]);
                
                // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                products = productsData.status === 'fulfilled' ? productsData.value : [];
                shops = shopsData.status === 'fulfilled' ? shopsData.value : [];
                ads = adsData.status === 'fulfilled' ? adsData.value : [];
                settings = settingsData.status === 'fulfilled' ? settingsData.value : { header_mode: "ads" };
                
                // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡ÙŠ Ù…ØµÙÙˆÙØ§Øª
                if (!Array.isArray(products)) products = [];
                if (!Array.isArray(shops)) shops = [];
                if (!Array.isArray(ads)) ads = [];
                if (typeof settings !== 'object') settings = { header_mode: "ads" };
                
                updateStatistics();
                updateHeaderModeDisplay();
                
                updateConnectionStatus('âœ… Ù…ØªØµÙ„ Ø¨Ù€ GitHub', 'success');
                showAlert('dashboard', 'âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                updateConnectionStatus('âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„', 'danger');
                showAlert('dashboard', 'âš ï¸ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.', 'danger');
            }
        }
        
        // ========== ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ==========
        function updateStatistics() {
            document.getElementById('totalProducts').textContent = products.length;
            document.getElementById('totalShops').textContent = shops.length;
            document.getElementById('totalAds').textContent = ads.length;
            document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString('ar-SA');
        }
        
        // ========== ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ ==========
        function updateConnectionStatus(message, type = 'info') {
            const statusElement = document.getElementById('connectionStatus');
            statusElement.textContent = message;
            statusElement.style.color = type === 'success' ? '#198754' : 
                                      type === 'warning' ? '#ffc107' : 
                                      type === 'danger' ? '#dc3545' : '#6c757d';
        }
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ==========
        document.getElementById('productSection').addEventListener('change', function() {
            const shopField = document.getElementById('shopField');
            const productShop = document.getElementById('productShop');
            
            if (SHOP_REQUIRED_SECTIONS.includes(this.value)) {
                shopField.style.display = 'block';
                
                const sectionShops = shops.filter(shop => shop.section === this.value);
                productShop.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ù„</option>';
                
                sectionShops.forEach(shop => {
                    const option = document.createElement('option');
                    option.value = shop.id || shop.name;
                    option.textContent = shop.name;
                    productShop.appendChild(option);
                });
            } else {
                shopField.style.display = 'none';
            }
        });
        
        async function addProduct() {
            const section = document.getElementById('productSection').value;
            const name = document.getElementById('productName').value;
            const price = document.getElementById('productPrice').value;
            const type = document.getElementById('productType').value;
            const description = document.getElementById('productDescription').value;
            const photo = document.getElementById('productPhoto').value;
            
            if (!section || !name || !price || !type || !photo) {
                showAlert('productMessage', 'âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'warning');
                return;
            }
            
            let shopId = null;
            if (SHOP_REQUIRED_SECTIONS.includes(section)) {
                shopId = document.getElementById('productShop').value;
                if (!shopId) {
                    showAlert('productMessage', 'âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… ÙŠØªØ·Ù„Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø­Ù„', 'warning');
                    return;
                }
            }
            
            const btnText = document.getElementById('productBtnText');
            const loading = document.getElementById('productLoading');
            btnText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
            loading.style.display = 'inline-block';
            
            const product = {
                id: 'PROD_' + Date.now(),
                section: section,
                name: name,
                price: price,
                type: type,
                description: description || '',
                photo: photo,
                created_at: new Date().toISOString(),
                active: true
            };
            
            if (shopId) {
                product.shop_id = shopId;
            }
            
            try {
                products.push(product);
                await saveToGitHub(PRODUCTS_FILE, products);
                
                document.getElementById('addProductForm').reset();
                document.getElementById('shopField').style.display = 'none';
                
                btnText.textContent = 'ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬';
                loading.style.display = 'none';
                
                showAlert('productMessage', 'âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                updateStatistics();
                loadProducts();
                
            } catch (error) {
                products.pop();
                btnText.textContent = 'ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬';
                loading.style.display = 'none';
                showAlert('productMessage', `âŒ ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: ${error.message}`, 'danger');
            }
        }
        
        function loadProducts() {
            const productsList = document.getElementById('productsList');
            productsList.innerHTML = '';
            
            if (products.length === 0) {
                productsList.innerHTML = `
                    <div style="text-align: center; padding: 50px 20px; color: #666;">
                        <div style="font-size: 60px; margin-bottom: 20px;">ğŸ“­</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</h3>
                        <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ù…Ù†ØªØ¬ Ù„Ù„Ù…ØªØ¬Ø±</p>
                    </div>
                `;
                return;
            }
            
            products.forEach((product, index) => {
                const productItem = document.createElement('div');
                productItem.className = 'data-item';
                productItem.innerHTML = `
                    <div class="data-info">
                        <h4>${product.name}</h4>
                        <p><strong>Ø§Ù„Ù‚Ø³Ù…:</strong> ${product.section}</p>
                        <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${product.type} | <strong>Ø§Ù„Ø³Ø¹Ø±:</strong> ${product.price} Ù„.Ø³</p>
                        <p>${product.description ? product.description.substring(0, 50) + '...' : ''}</p>
                    </div>
                    <div class="data-actions">
                        <button class="btn btn-danger btn-sm" onclick="deleteProduct(${index})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                    </div>
                `;
                productsList.appendChild(productItem);
            });
        }
        
        function searchProducts() {
            const query = document.getElementById('searchProduct').value.toLowerCase();
            const filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(query) ||
                product.type.toLowerCase().includes(query) ||
                product.section.toLowerCase().includes(query)
            );
            
            const productsList = document.getElementById('productsList');
            productsList.innerHTML = '';
            
            if (filteredProducts.length === 0) {
                productsList.innerHTML = `
                    <div style="text-align: center; padding: 50px 20px; color: #666;">
                        <div style="font-size: 60px; margin-bottom: 20px;">ğŸ”</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</h3>
                        <p>Ø­Ø§ÙˆÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¨ÙƒÙ„Ù…Ø§Øª Ø£Ø®Ø±Ù‰</p>
                    </div>
                `;
                return;
            }
            
            filteredProducts.forEach((product, index) => {
                const originalIndex = products.findIndex(p => p.id === product.id);
                const productItem = document.createElement('div');
                productItem.className = 'data-item';
                productItem.innerHTML = `
                    <div class="data-info">
                        <h4>${product.name}</h4>
                        <p><strong>Ø§Ù„Ù‚Ø³Ù…:</strong> ${product.section}</p>
                        <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${product.type} | <strong>Ø§Ù„Ø³Ø¹Ø±:</strong> ${product.price} Ù„.Ø³</p>
                    </div>
                    <div class="data-actions">
                        <button class="btn btn-danger btn-sm" onclick="deleteProduct(${originalIndex})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                    </div>
                `;
                productsList.appendChild(productItem);
            });
        }
        
        async function deleteProduct(index) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ')) return;
            
            products.splice(index, 1);
            
            try {
                await saveToGitHub(PRODUCTS_FILE, products);
                updateStatistics();
                loadProducts();
                showAlert('productMessage', 'ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                showAlert('productMessage', `âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: ${error.message}`, 'danger');
            }
        }
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ù„Ø§Øª ==========
        async function addShop() {
            const section = document.getElementById('shopSection').value;
            const name = document.getElementById('shopName').value;
            const type = document.getElementById('shopType').value;
            const description = document.getElementById('shopDescription').value;
            const photo = document.getElementById('shopPhoto').value;
            
            if (!section || !name || !type || !description || !photo) {
                showAlert('shopMessage', 'âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'warning');
                return;
            }
            
            const btnText = document.getElementById('shopBtnText');
            const loading = document.getElementById('shopLoading');
            btnText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
            loading.style.display = 'inline-block';
            
            const shop = {
                id: 'SHOP_' + Date.now(),
                section: section,
                name: name,
                type: type,
                description: description,
                photo: photo,
                created_at: new Date().toISOString(),
                active: true
            };
            
            try {
                shops.push(shop);
                await saveToGitHub(SHOPS_FILE, shops);
                
                document.getElementById('addShopForm').reset();
                
                btnText.textContent = 'ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„';
                loading.style.display = 'none';
                
                showAlert('shopMessage', 'âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø­Ù„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                updateStatistics();
                loadShops();
                
            } catch (error) {
                shops.pop();
                btnText.textContent = 'ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„';
                loading.style.display = 'none';
                showAlert('shopMessage', `âŒ ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„: ${error.message}`, 'danger');
            }
        }
        
        function loadShops() {
            const shopsList = document.getElementById('shopsList');
            shopsList.innerHTML = '';
            
            if (shops.length === 0) {
                shopsList.innerHTML = `
                    <div style="text-align: center; padding: 50px 20px; color: #666;">
                        <div style="font-size: 60px; margin-bottom: 20px;">ğŸª</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ù„Ø§Øª</h3>
                        <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ù…Ø­Ù„ Ù„Ù„Ù…ØªØ¬Ø±</p>
                    </div>
                `;
                return;
            }
            
            shops.forEach((shop, index) => {
                const shopItem = document.createElement('div');
                shopItem.className = 'data-item';
                shopItem.innerHTML = `
                    <div class="data-info">
                        <h4>${shop.name}</h4>
                        <p><strong>Ø§Ù„Ù‚Ø³Ù…:</strong> ${shop.section}</p>
                        <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${shop.type}</p>
                        <p>${shop.description.substring(0, 70)}...</p>
                    </div>
                    <div class="data-actions">
                        <button class="btn btn-danger btn-sm" onclick="deleteShop(${index})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                    </div>
                `;
                shopsList.appendChild(shopItem);
            });
        }
        
        function searchShops() {
            const query = document.getElementById('searchShop').value.toLowerCase();
            const filteredShops = shops.filter(shop => 
                shop.name.toLowerCase().includes(query) ||
                shop.type.toLowerCase().includes(query) ||
                shop.section.toLowerCase().includes(query)
            );
            
            const shopsList = document.getElementById('shopsList');
            shopsList.innerHTML = '';
            
            if (filteredShops.length === 0) {
                shopsList.innerHTML = `
                    <div style="text-align: center; padding: 50px 20px; color: #666;">
                        <div style="font-size: 60px; margin-bottom: 20px;">ğŸ”</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</h3>
                        <p>Ø­Ø§ÙˆÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¨ÙƒÙ„Ù…Ø§Øª Ø£Ø®Ø±Ù‰</p>
                    </div>
                `;
                return;
            }
            
            filteredShops.forEach((shop, index) => {
                const originalIndex = shops.findIndex(s => s.id === shop.id);
                const shopItem = document.createElement('div');
                shopItem.className = 'data-item';
                shopItem.innerHTML = `
                    <div class="data-info">
                        <h4>${shop.name}</h4>
                        <p><strong>Ø§Ù„Ù‚Ø³Ù…:</strong> ${shop.section}</p>
                        <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${shop.type}</p>
                    </div>
                    <div class="data-actions">
                        <button class="btn btn-danger btn-sm" onclick="deleteShop(${originalIndex})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                    </div>
                `;
                shopsList.appendChild(shopItem);
            });
        }
        
        async function deleteShop(index) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­Ù„ØŸ')) return;
            
            shops.splice(index, 1);
            
            try {
                await saveToGitHub(SHOPS_FILE, shops);
                updateStatistics();
                loadShops();
                showAlert('shopMessage', 'ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø­Ù„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                showAlert('shopMessage', `âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø­Ù„: ${error.message}`, 'danger');
            }
        }
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ==========
        document.getElementById('adLinkType').addEventListener('change', function() {
            const linkField = document.getElementById('adLinkField');
            const linkLabel = document.getElementById('adLinkLabel');
            const linkSelect = document.getElementById('adLinkId');
            
            if (this.value === 'shop') {
                linkField.style.display = 'block';
                linkLabel.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ù„';
                linkSelect.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ù„ --</option>';
                
                shops.forEach(shop => {
                    const option = document.createElement('option');
                    option.value = shop.id || shop.name;
                    option.textContent = shop.name;
                    linkSelect.appendChild(option);
                });
                
            } else if (this.value === 'product') {
                linkField.style.display = 'block';
                linkLabel.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬';
                linkSelect.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬ --</option>';
                
                products.forEach(product => {
                    const option = document.createElement('option');
                    option.value = product.id || product.name;
                    option.textContent = product.name;
                    linkSelect.appendChild(option);
                });
                
            } else {
                linkField.style.display = 'none';
            }
        });
        
        async function addAd() {
            const name = document.getElementById('adName').value;
            const description = document.getElementById('adDescription').value;
            const photo = document.getElementById('adPhoto').value;
            const linkType = document.getElementById('adLinkType').value;
            const linkId = document.getElementById('adLinkId').value;
            
            if (!name || !description || !photo) {
                showAlert('adMessage', 'âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'warning');
                return;
            }
            
            const btnText = document.getElementById('adBtnText');
            const loading = document.getElementById('adLoading');
            btnText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
            loading.style.display = 'inline-block';
            
            const ad = {
                id: 'AD_' + Date.now(),
                name: name,
                description: description,
                photo: photo,
                created_at: new Date().toISOString(),
                active: true
            };
            
            if (linkType && linkId) {
                ad.link_type = linkType;
                ad.link_id = linkId;
                
                if (linkType === 'shop') {
                    const shop = shops.find(s => (s.id === linkId) || (s.name === linkId));
                    if (shop) {
                        ad.shop_name = shop.name;
                        ad.section = shop.section;
                    }
                } else if (linkType === 'product') {
                    const product = products.find(p => (p.id === linkId) || (p.name === linkId));
                    if (product) {
                        ad.product_name = product.name;
                        ad.section = product.section;
                    }
                }
            }
            
            try {
                ads.push(ad);
                await saveToGitHub(ADS_FILE, ads);
                
                document.getElementById('addAdForm').reset();
                document.getElementById('adLinkField').style.display = 'none';
                
                btnText.textContent = 'ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†';
                loading.style.display = 'none';
                
                showAlert('adMessage', 'âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­', 'success');
                updateStatistics();
                loadAds();
                
            } catch (error) {
                ads.pop();
                btnText.textContent = 'ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†';
                loading.style.display = 'none';
                showAlert('adMessage', `âŒ ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†: ${error.message}`, 'danger');
            }
        }
        
        function loadAds() {
            const adsList = document.getElementById('adsList');
            adsList.innerHTML = '';
            
            if (ads.length === 0) {
                adsList.innerHTML = `
                    <div style="text-align: center; padding: 50px 20px; color: #666;">
                        <div style="font-size: 60px; margin-bottom: 20px;">â­</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h3>
                        <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ù…ØªØ¬Ø±</p>
                    </div>
                `;
                return;
            }
            
            ads.forEach((ad, index) => {
                const adItem = document.createElement('div');
                adItem.className = 'data-item';
                
                let linkInfo = '';
                if (ad.link_type === 'shop') {
                    linkInfo = `<p><strong>Ù…Ø±ØªØ¨Ø· Ø¨Ù…Ø­Ù„:</strong> ${ad.shop_name || ad.link_id}</p>`;
                } else if (ad.link_type === 'product') {
                    linkInfo = `<p><strong>Ù…Ø±ØªØ¨Ø· Ø¨Ù…Ù†ØªØ¬:</strong> ${ad.product_name || ad.link_id}</p>`;
                }
                
                adItem.innerHTML = `
                    <div class="data-info">
                        <h4>${ad.name}</h4>
                        <p>${ad.description.substring(0, 70)}...</p>
                        ${linkInfo}
                        <p><small>Ø£Ø¶ÙŠÙ ÙÙŠ: ${new Date(ad.created_at).toLocaleDateString('ar-SA')}</small></p>
                    </div>
                    <div class="data-actions">
                        <button class="btn btn-danger btn-sm" onclick="deleteAd(${index})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                    </div>
                `;
                adsList.appendChild(adItem);
            });
        }
        
        function searchAds() {
            const query = document.getElementById('searchAd').value.toLowerCase();
            const filteredAds = ads.filter(ad => 
                ad.name.toLowerCase().includes(query) ||
                ad.description.toLowerCase().includes(query)
            );
            
            const adsList = document.getElementById('adsList');
            adsList.innerHTML = '';
            
            if (filteredAds.length === 0) {
                adsList.innerHTML = `
                    <div style="text-align: center; padding: 50px 20px; color: #666;">
                        <div style="font-size: 60px; margin-bottom: 20px;">ğŸ”</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</h3>
                        <p>Ø­Ø§ÙˆÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¨ÙƒÙ„Ù…Ø§Øª Ø£Ø®Ø±Ù‰</p>
                    </div>
                `;
                return;
            }
            
            filteredAds.forEach((ad, index) => {
                const originalIndex = ads.findIndex(a => a.id === ad.id);
                const adItem = document.createElement('div');
                adItem.className = 'data-item';
                adItem.innerHTML = `
                    <div class="data-info">
                        <h4>${ad.name}</h4>
                        <p>${ad.description.substring(0, 50)}...</p>
                    </div>
                    <div class="data-actions">
                        <button class="btn btn-danger btn-sm" onclick="deleteAd(${originalIndex})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                    </div>
                `;
                adsList.appendChild(adItem);
            });
        }
        
        async function deleteAd(index) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ')) return;
            
            ads.splice(index, 1);
            
            try {
                await saveToGitHub(ADS_FILE, ads);
                updateStatistics();
                loadAds();
                showAlert('adMessage', 'ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                showAlert('adMessage', `âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†: ${error.message}`, 'danger');
            }
        }
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ==========
        async function loadSettings() {
            try {
                const settingsData = await readFromGitHub(SETTINGS_FILE);
                if (settingsData && typeof settingsData === 'object') {
                    settings = settingsData;
                } else {
                    settings = { header_mode: "ads" };
                }
                updateHeaderModeDisplay();
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:', error);
                settings = { header_mode: "ads" };
                updateHeaderModeDisplay();
            }
        }
        
        function updateHeaderModeDisplay() {
            const currentMode = document.getElementById('currentHeaderMode');
            const statusBadge = document.getElementById('headerModeStatus');
            const toggleBtn = document.getElementById('toggleBtnText');
            
            const mode = settings.header_mode || "ads";
            const isAds = mode === "ads";
            
            currentMode.textContent = isAds ? "ads (Ù…ÙØ¹Ù„)" : "else (Ù…ÙˆÙ‚Ù)";
            currentMode.style.color = isAds ? "#198754" : "#dc3545";
            
            statusBadge.textContent = mode;
            statusBadge.className = `status-badge ${mode}`;
            
            toggleBtn.textContent = isAds ? "â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª" : "â–¶ï¸ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª";
        }
        
        async function toggleHeaderMode() {
            const btnText = document.getElementById('toggleBtnText');
            const loading = document.getElementById('headerModeLoading');
            
            btnText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„...';
            loading.style.display = 'inline-block';
            
            try {
                // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹
                settings.header_mode = settings.header_mode === "ads" ? "else" : "ads";
                
                // Ø­ÙØ¸ ÙÙŠ GitHub
                await saveToGitHub(SETTINGS_FILE, settings);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                updateHeaderModeDisplay();
                
                // Ø¥Ø®ÙØ§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                loading.style.display = 'none';
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
                const message = settings.header_mode === "ads" 
                    ? "âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø±" 
                    : "â¸ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø±";
                showAlert('headerModeMessage', message, 'success');
                
            } catch (error) {
                loading.style.display = 'none';
                showAlert('headerModeMessage', `âŒ ÙØ´Ù„ ÙÙŠ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø©: ${error.message}`, 'danger');
            }
        }
        
        // ========== Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ==========
        function downloadJson(filename, data) {
            const jsonString = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showAlert('dashboard', `âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${filename}`, 'success');
        }
        
        function downloadBackup() {
            const backupData = {
                products: products,
                shops: shops,
                ads: ads,
                settings: settings,
                exported_at: new Date().toISOString()
            };
            
            downloadJson('btikka-backup-' + new Date().toISOString().split('T')[0] + '.json', backupData);
        }
        
        // ========== Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© ==========
        function showAlert(containerId, message, type) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.textContent = message;
            container.className = `alert alert-${type}`;
            container.style.display = 'block';
            
            setTimeout(() => {
                container.style.display = 'none';
            }, 5000);
        }
        
        async function testGitHubConnection() {
            updateConnectionStatus('ğŸ”— Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„...', 'warning');
            
            try {
                const response = await fetch(`https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}`, {
                    headers: {
                        'Authorization': `Bearer ${GITHUB_TOKEN}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (response.ok) {
                    updateConnectionStatus('âœ… Ø§Ù„Ø§ØªØµØ§Ù„ Ù†Ø§Ø¬Ø­', 'success');
                    showAlert('dashboard', 'âœ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù…Ø³ØªÙˆØ¯Ø¹ GitHub Ù†Ø§Ø¬Ø­', 'success');
                } else {
                    updateConnectionStatus('âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„', 'danger');
                    showAlert('dashboard', 'âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù…Ø³ØªÙˆØ¯Ø¹ GitHub', 'danger');
                }
            } catch (error) {
                updateConnectionStatus('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„', 'danger');
                showAlert('dashboard', `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`, 'danger');
            }
        }
        
        async function reloadAllData() {
            try {
                updateConnectionStatus('ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', 'warning');
                
                const [productsData, shopsData, adsData, settingsData] = await Promise.allSettled([
                    readFromGitHub(PRODUCTS_FILE),
                    readFromGitHub(SHOPS_FILE),
                    readFromGitHub(ADS_FILE),
                    readFromGitHub(SETTINGS_FILE)
                ]);
                
                products = productsData.status === 'fulfilled' ? productsData.value : [];
                shops = shopsData.status === 'fulfilled' ? shopsData.value : [];
                ads = adsData.status === 'fulfilled' ? adsData.value : [];
                settings = settingsData.status === 'fulfilled' ? settingsData.value : { header_mode: "ads" };
                
                updateStatistics();
                updateHeaderModeDisplay();
                
                updateConnectionStatus('âœ… ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«', 'success');
                showAlert('dashboard', 'âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                updateConnectionStatus('âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«', 'danger');
                showAlert('dashboard', `âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`, 'danger');
            }
        }
        
        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ==========
        document.addEventListener('DOMContentLoaded', function() {
            loadInitialData();
            
            setTimeout(() => {
                testGitHubConnection();
            }, 1000);
        });
    </script>
</body>
</html>
