<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø¨ØªÙƒØ©</title>
    
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #6f42c1;
            --secondary-color: #0d6efd;
            --success-color: #198754;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --dark-color: #212529;
            --light-color: #f8f9fa;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .navbar-brand {
            font-weight: bold;
            color: var(--primary-color) !important;
        }
        
        .stat-card {
            border-radius: 10px;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            margin-bottom: 20px;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .action-card {
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            height: 100%;
            margin-bottom: 20px;
        }
        
        .action-card:hover {
            background-color: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }
        
        .action-card:hover .card-icon {
            color: white;
        }
        
        .action-card:hover .card-title {
            color: white;
        }
        
        .card-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .card-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .card-text {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .action-card:hover .card-text {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .modal-content {
            border-radius: 10px;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: #5a32a3;
            border-color: #5a32a3;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            border-color: var(--danger-color);
        }
        
        .btn-success {
            background-color: var(--success-color);
            border-color: var(--success-color);
        }
        
        .section-title {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin: 30px 0 20px 0;
            color: var(--dark-color);
        }
        
        .table-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .alert-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            min-width: 300px;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 1.5rem;
            color: var(--primary-color);
        }
        
        .badge-online {
            background-color: var(--success-color);
        }
        
        .badge-offline {
            background-color: var(--danger-color);
        }
        
        .product-img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 5px;
        }
        
        .featured-img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
        }
        
        @media (max-width: 768px) {
            .action-card {
                margin-bottom: 15px;
            }
            
            .stat-card {
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Telegram WebApp -->
    <div id="telegram-webapp"></div>
    
    <!-- Loading Screen -->
    <div id="loading" class="loading">
        <div class="text-center">
            <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                <span class="visually-hidden">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
            </div>
            <h4 class="mt-3">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…...</h4>
        </div>
    </div>
    
    <!-- Main Content (Hidden Initially) -->
    <div id="main-content" style="display: none;">
        <!-- Navigation Bar -->
        <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <i class="fas fa-store me-2"></i>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø¨ØªÙƒØ©
                </a>
                <div class="d-flex align-items-center">
                    <span class="me-3 text-muted" id="admin-name"></span>
                    <button class="btn btn-outline-primary btn-sm" onclick="refreshData()">
                        <i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ«
                    </button>
                </div>
            </div>
        </nav>
        
        <!-- Alerts Container -->
        <div class="alert-container" id="alert-container"></div>
        
        <!-- Main Container -->
        <div class="container-fluid mt-3">
            <!-- Statistics Section -->
            <div class="row" id="stats-section">
                <div class="col-12">
                    <h3 class="section-title"><i class="fas fa-chart-bar me-2"></i>Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h3>
                </div>
                
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card card bg-primary text-white">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h6 class="card-subtitle mb-2">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h6>
                                    <h2 class="card-title" id="products-count">0</h2>
                                </div>
                                <div class="align-self-center">
                                    <i class="fas fa-box fa-2x opacity-75"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card card bg-success text-white">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h6 class="card-subtitle mb-2">Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h6>
                                    <h2 class="card-title" id="featured-count">0</h2>
                                </div>
                                <div class="align-self-center">
                                    <i class="fas fa-star fa-2x opacity-75"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card card bg-warning text-dark">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h6 class="card-subtitle mb-2">Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h6>
                                    <h4 class="card-title" id="ads-status">ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ</h4>
                                </div>
                                <div class="align-self-center">
                                    <i class="fas fa-ad fa-2x opacity-75"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card card bg-info text-white">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h6 class="card-subtitle mb-2">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</h6>
                                    <h6 class="card-title" id="last-updated">--:--</h6>
                                </div>
                                <div class="align-self-center">
                                    <i class="fas fa-clock fa-2x opacity-75"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions Section -->
            <div class="row mt-4" id="actions-section">
                <div class="col-12">
                    <h3 class="section-title"><i class="fas fa-bolt me-2"></i>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h3>
                </div>
                
                <div class="col-md-3 col-sm-6">
                    <div class="action-card" onclick="showAddProductModal()">
                        <div class="card-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <h5 class="card-title">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h5>
                        <p class="card-text">Ø£Ø¶Ù Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ù…ØªØ¬Ø±</p>
                    </div>
                </div>
                
                <div class="col-md-3 col-sm-6">
                    <div class="action-card" onclick="showAddFeaturedModal()">
                        <div class="card-icon">
                            <i class="fas fa-store-alt"></i>
                        </div>
                        <h5 class="card-title">Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„ Ù…Ù…ÙŠØ²</h5>
                        <p class="card-text">Ø£Ø¶Ù Ù…Ø­Ù„ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù…ÙŠØ²ÙŠÙ†</p>
                    </div>
                </div>
                
                <div class="col-md-3 col-sm-6">
                    <div class="action-card" onclick="showDeleteProductModal()">
                        <div class="card-icon">
                            <i class="fas fa-trash-alt"></i>
                        </div>
                        <h5 class="card-title">Ø­Ø°Ù Ù…Ù†ØªØ¬</h5>
                        <p class="card-text">Ø§Ø­Ø°Ù Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±</p>
                    </div>
                </div>
                
                <div class="col-md-3 col-sm-6">
                    <div class="action-card" onclick="toggleAdsStatus()">
                        <div class="card-icon">
                            <i class="fas fa-adjust"></i>
                        </div>
                        <h5 class="card-title">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h5>
                        <p class="card-text">ÙØ¹Ù‘Ù„ Ø£Ùˆ Ø¹Ø·Ù‘Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</p>
                    </div>
                </div>
            </div>
            
            <!-- Products Management Section -->
            <div class="row mt-4" id="products-section">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="section-title"><i class="fas fa-boxes me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
                        <button class="btn btn-primary" onclick="loadProducts()">
                            <i class="fas fa-sync-alt me-1"></i>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover" id="products-table">
                                <thead class="table-dark">
                                    <tr>
                                        <th width="50">#</th>
                                        <th>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>
                                        <th>Ø§Ù„Ù‚Ø³Ù…</th>
                                        <th>Ø§Ù„Ø³Ø¹Ø±</th>
                                        <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                        <th width="100">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="products-table-body">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Featured Shops Management Section -->
            <div class="row mt-4" id="featured-section">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="section-title"><i class="fas fa-crown me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h3>
                        <button class="btn btn-primary" onclick="loadFeaturedShops()">
                            <i class="fas fa-sync-alt me-1"></i>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover" id="featured-table">
                                <thead class="table-dark">
                                    <tr>
                                        <th width="50">#</th>
                                        <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„</th>
                                        <th>Ø§Ù„ØµÙˆØ±Ø©</th>
                                        <th>Ø§Ù„ÙˆØµÙ</th>
                                        <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©</th>
                                        <th width="100">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="featured-table-body">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <footer class="mt-5 py-3 text-center text-muted border-top">
                <p>Â© 2024 Ù…ØªØ¬Ø± Ø¨ØªÙƒØ© - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
                <p class="small">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <span id="footer-updated"></span></p>
            </footer>
        </div>
    </div>
    
    <!-- Modals -->
    
    <!-- Add Product Modal -->
    <div class="modal fade" id="addProductModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-plus-circle me-2"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addProductForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="productName" class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ *</label>
                                <input type="text" class="form-control" id="productName" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="productSection" class="form-label">Ø§Ù„Ù‚Ø³Ù… *</label>
                                <select class="form-select" id="productSection" required>
                                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                                    <option value="ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª">ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª</option>
                                    <option value="ğŸ›ï¸ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª â€“ Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©">ğŸ›ï¸ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª â€“ Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©</option>
                                    <option value="âš¡ Ø£Ø¯ÙˆØ§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ">âš¡ Ø£Ø¯ÙˆØ§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ</option>
                                    <option value="ğŸ”Œ Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©">ğŸ”Œ Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</option>
                                    <option value="ğŸ½ï¸ Ø§Ø¯ÙˆØ§Øª Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ©">ğŸ½ï¸ Ø§Ø¯ÙˆØ§Øª Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ©</option>
                                    <option value="ğŸ Ù‡Ø¯Ø§ÙŠØ§">ğŸ Ù‡Ø¯Ø§ÙŠØ§</option>
                                    <option value="ğŸ—ï¸ Ù…ÙˆØ§Ø¯ Ø¨Ù†Ø§Ø¡ ÙˆØªØ´Ø·ÙŠØ¨">ğŸ—ï¸ Ù…ÙˆØ§Ø¯ Ø¨Ù†Ø§Ø¡ ÙˆØªØ´Ø·ÙŠØ¨</option>
                                    <option value="ğŸ’Š Ø£Ø¯ÙˆÙŠØ© ÙˆÙ…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø·Ø¨ÙŠØ©">ğŸ’Š Ø£Ø¯ÙˆÙŠØ© ÙˆÙ…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø·Ø¨ÙŠØ©</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="productType" class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬ *</label>
                                <input type="text" class="form-control" id="productType" placeholder="Ù…Ø«Ø§Ù„: Ø­Ù„ÙˆÙŠØ§ØªØŒ Ù…Ø´Ø±ÙˆØ¨Ø§Øª..." required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="productPrice" class="form-label">Ø§Ù„Ø³Ø¹Ø± (Ù„.Ø³) *</label>
                                <input type="number" class="form-control" id="productPrice" required>
                            </div>
                            <div class="col-md-12 mb-3">
                                <label for="productDescription" class="form-label">Ø§Ù„ÙˆØµÙ</label>
                                <textarea class="form-control" id="productDescription" rows="3"></textarea>
                            </div>
                            <div class="col-md-12 mb-3">
                                <label for="productPhoto" class="form-label">Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© *</label>
                                <input type="url" class="form-control" id="productPhoto" placeholder="https://example.com/image.jpg" required>
                            </div>
                            <div class="col-md-12 mb-3" id="shopFieldContainer" style="display: none;">
                                <label for="productShop" class="form-label">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ù„ (Ù„Ù„Ù‚Ø³Ù… Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª)</label>
                                <select class="form-select" id="productShop">
                                    <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ù„ --</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="button" class="btn btn-primary" onclick="saveProduct()">Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Featured Shop Modal -->
    <div class="modal fade" id="addFeaturedModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-store-alt me-2"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„ Ù…Ù…ÙŠØ²</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addFeaturedForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="featuredName" class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„ *</label>
                                <input type="text" class="form-control" id="featuredName" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="featuredPhoto" class="form-label">Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© *</label>
                                <input type="url" class="form-control" id="featuredPhoto" placeholder="https://example.com/image.jpg" required>
                            </div>
                            <div class="col-md-12 mb-3">
                                <label for="featuredDescription" class="form-label">Ø§Ù„ÙˆØµÙ *</label>
                                <textarea class="form-control" id="featuredDescription" rows="3" required></textarea>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="featuredSection" class="form-label">Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø±ØªØ¨Ø· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                                <select class="form-select" id="featuredSection">
                                    <option value="">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù‚Ø³Ù…</option>
                                    <option value="ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª">ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª</option>
                                    <option value="ğŸ›ï¸ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª â€“ Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©">ğŸ›ï¸ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª â€“ Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="featuredShopName" class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„ ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                                <input type="text" class="form-control" id="featuredShopName" placeholder="Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø­Ù„ Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø±">
                            </div>
                            <div class="col-12">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø¥Ø°Ø§ Ø£Ø¯Ø®Ù„Øª Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„ ÙˆØ§Ù„Ù‚Ø³Ù…ØŒ Ø³ÙŠØµØ¨Ø­ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù‚Ø§Ø¨Ù„Ø§Ù‹ Ù„Ù„Ù†Ù‚Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù…Ø­Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„ÙŠÙ‡.
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="button" class="btn btn-primary" onclick="saveFeaturedShop()">Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ù…Ù…ÙŠØ²</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Product Modal -->
    <div class="modal fade" id="deleteProductModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-trash-alt me-2"></i>Ø­Ø°Ù Ù…Ù†ØªØ¬</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="searchProduct" class="form-label">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø­Ø°Ù</label>
                        <input type="text" class="form-control" id="searchProduct" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬...">
                    </div>
                    <div id="productSearchResults" style="max-height: 300px; overflow-y: auto;">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Confirmation Modal -->
    <div class="modal fade" id="confirmationModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmationTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="confirmationBody">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="button" class="btn btn-danger" id="confirmActionBtn">ØªØ£ÙƒÙŠØ¯</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <!-- Main JavaScript -->
    <script>
        // ========== Ø§Ù„ØªÙƒÙˆÙŠÙ† ==========
        const CONFIG = {
            GITHUB_TOKEN: "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",
            REPO_OWNER: "mrdr0956",
            REPO_NAME: "Btikka-site",
            PATHS: {
                PRODUCTS: "products.json",
                FEATURED_SHOPS: "featured_shops.json",
                SETTINGS: "settings.json"
            },
            ADMINS: [7139427767],
            SECTIONS: [
                "ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª",
                "ğŸ›ï¸ Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª â€“ Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©",
                "âš¡ Ø£Ø¯ÙˆØ§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ",
                "ğŸ”Œ Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©",
                "ğŸ½ï¸ Ø§Ø¯ÙˆØ§Øª Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ©",
                "ğŸ Ù‡Ø¯Ø§ÙŠØ§",
                "ğŸ—ï¸ Ù…ÙˆØ§Ø¯ Ø¨Ù†Ø§Ø¡ ÙˆØªØ´Ø·ÙŠØ¨",
                "ğŸ’Š Ø£Ø¯ÙˆÙŠØ© ÙˆÙ…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø·Ø¨ÙŠØ©"
            ]
        };
        
        // ========== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ==========
        let tg = null;
        let currentUser = null;
        let isAdmin = false;
        let productsData = [];
        let featuredShopsData = [];
        let settingsData = {};
        
        // ========== ØªÙ‡ÙŠØ¦Ø© Telegram WebApp ==========
        function initTelegramWebApp() {
            tg = window.Telegram.WebApp;
            
            // ØªÙˆØ³ÙŠØ¹ Ù†Ø§ÙØ°Ø© WebApp
            tg.expand();
            
            // ØªØ¹ÙŠÙŠÙ† Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©
            tg.setBackgroundColor('#f5f5f5');
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            currentUser = tg.initDataUnsafe.user;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø£Ø¯Ù…Ù†
            if (currentUser && CONFIG.ADMINS.includes(currentUser.id)) {
                isAdmin = true;
                document.getElementById('admin-name').textContent = currentUser.first_name || 'Ø£Ø¯Ù…Ù†';
                showMainContent();
            } else {
                showError('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….');
            }
        }
        
        // ========== ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¹Ø±Ø¶ ==========
        function showMainContent() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            loadAllData();
        }
        
        function showError(message) {
            document.getElementById('loading').innerHTML = `
                <div class="alert alert-danger text-center" style="max-width: 500px;">
                    <h4><i class="fas fa-exclamation-triangle"></i> Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„</h4>
                    <p>${message}</p>
                    <button class="btn btn-primary mt-3" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
                </div>
            `;
        }
        
        function showAlert(message, type = 'success') {
            const alertContainer = document.getElementById('alert-container');
            const alertId = 'alert-' + Date.now();
            
            const alertHtml = `
                <div class="alert alert-${type} alert-dismissible fade show" id="${alertId}" role="alert">
                    ${message}
                    <button type="button" class="btn-close" onclick="document.getElementById('${alertId}').remove()"></button>
                </div>
            `;
            
            alertContainer.insertAdjacentHTML('afterbegin', alertHtml);
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†
            setTimeout(() => {
                const alert = document.getElementById(alertId);
                if (alert) alert.remove();
            }, 5000);
        }
        
        // ========== ÙˆØ¸Ø§Ø¦Ù GitHub API ==========
        async function fetchGitHubFile(filePath) {
            const url = `https://api.github.com/repos/${CONFIG.REPO_OWNER}/${CONFIG.REPO_NAME}/contents/${filePath}`;
            
            try {
                const response = await axios.get(url, {
                    headers: {
                        'Authorization': `Bearer ${CONFIG.GITHUB_TOKEN}`,
                        'Accept': 'application/vnd.github+json'
                    }
                });
                
                const content = atob(response.data.content);
                return {
                    data: JSON.parse(content),
                    sha: response.data.sha
                };
            } catch (error) {
                console.error('Error fetching file:', error);
                throw error;
            }
        }
        
        async function saveGitHubFile(filePath, content, sha) {
            const url = `https://api.github.com/repos/${CONFIG.REPO_OWNER}/${CONFIG.REPO_NAME}/contents/${filePath}`;
            
            const contentBase64 = btoa(JSON.stringify(content, null, 2));
            
            const payload = {
                message: `Update ${filePath} via admin panel`,
                content: contentBase64,
                sha: sha
            };
            
            try {
                const response = await axios.put(url, payload, {
                    headers: {
                        'Authorization': `Bearer ${CONFIG.GITHUB_TOKEN}`,
                        'Accept': 'application/vnd.github+json',
                        'Content-Type': 'application/json'
                    }
                });
                
                return response.data;
            } catch (error) {
                console.error('Error saving file:', error);
                throw error;
            }
        }
        
        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ==========
        async function loadAllData() {
            try {
                const [productsRes, featuredRes, settingsRes] = await Promise.all([
                    fetchGitHubFile(CONFIG.PATHS.PRODUCTS),
                    fetchGitHubFile(CONFIG.PATHS.FEATURED_SHOPS),
                    fetchGitHubFile(CONFIG.PATHS.SETTINGS)
                ]);
                
                productsData = productsRes.data;
                featuredShopsData = featuredRes.data;
                settingsData = settingsRes.data;
                
                updateStatistics();
                loadProducts();
                loadFeaturedShops();
                
                const now = new Date().toLocaleTimeString('ar-SA');
                document.getElementById('last-updated').textContent = now;
                document.getElementById('footer-updated').textContent = now;
                
                showAlert('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                console.error('Error loading data:', error);
                showAlert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'danger');
            }
        }
        
        function updateStatistics() {
            // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
            const productCount = productsData.filter(p => p.kind === 'product').length;
            document.getElementById('products-count').textContent = productCount;
            
            // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©
            const featuredCount = featuredShopsData.length;
            document.getElementById('featured-count').textContent = featuredCount;
            
            // Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
            const adsStatus = settingsData.header_mode === 'ads' ? 'Ù…ÙØ¹Ù„Ø© ğŸŸ¢' : 'Ù…Ø¹Ø·Ù„Ø© ğŸ”´';
            document.getElementById('ads-status').textContent = adsStatus;
        }
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ==========
        function loadProducts() {
            const tableBody = document.getElementById('products-table-body');
            const products = productsData.filter(p => p.kind === 'product');
            
            tableBody.innerHTML = '';
            
            products.forEach((product, index) => {
                const row = `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${product.name || ''}</td>
                        <td>${product.section || ''}</td>
                        <td>${product.price ? product.price + ' Ù„.Ø³' : ''}</td>
                        <td>${product.type || ''}</td>
                        <td>
                            <button class="btn btn-sm btn-danger" onclick="deleteProductConfirm(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }
        
        function showAddProductModal() {
            const modal = new bootstrap.Modal(document.getElementById('addProductModal'));
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            document.getElementById('addProductForm').reset();
            
            // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø­Ù‚Ù„ Ø§Ù„Ù…Ø­Ù„ Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù…
            document.getElementById('productSection').addEventListener('change', function() {
                const shopFieldContainer = document.getElementById('shopFieldContainer');
                const productShopSelect = document.getElementById('productShop');
                
                if (this.value === 'ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª') {
                    shopFieldContainer.style.display = 'block';
                    
                    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ù„Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù…
                    const shops = productsData.filter(p => 
                        p.kind === 'shop' && 
                        p.section === 'ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª'
                    );
                    
                    productShopSelect.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ù„ --</option>';
                    shops.forEach(shop => {
                        productShopSelect.innerHTML += `<option value="${shop.shop}">${shop.shop}</option>`;
                    });
                } else {
                    shopFieldContainer.style.display = 'none';
                }
            });
            
            modal.show();
        }
        
        async function saveProduct() {
            const product = {
                kind: 'product',
                section: document.getElementById('productSection').value,
                name: document.getElementById('productName').value,
                photo: document.getElementById('productPhoto').value,
                description: document.getElementById('productDescription').value,
                type: document.getElementById('productType').value,
                price: document.getElementById('productPrice').value
            };
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            if (!product.name || !product.section || !product.type || !product.price || !product.photo) {
                showAlert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'warning');
                return;
            }
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø­Ù„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù‚Ø³Ù… Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª
            if (product.section === 'ğŸ° Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª') {
                const shop = document.getElementById('productShop').value;
                if (shop) {
                    product.shop = shop;
                }
            }
            
            try {
                const response = await fetchGitHubFile(CONFIG.PATHS.PRODUCTS);
                const products = response.data;
                const sha = response.sha;
                
                products.push(product);
                await saveGitHubFile(CONFIG.PATHS.PRODUCTS, products, sha);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                productsData = products;
                
                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                bootstrap.Modal.getInstance(document.getElementById('addProductModal')).hide();
                updateStatistics();
                loadProducts();
                
                showAlert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                console.error('Error saving product:', error);
                showAlert('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬', 'danger');
            }
        }
        
        function deleteProductConfirm(index) {
            const product = productsData.filter(p => p.kind === 'product')[index];
            
            if (!product) return;
            
            document.getElementById('confirmationTitle').textContent = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù';
            document.getElementById('confirmationBody').innerHTML = `
                <p>Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„ØªØ§Ù„ÙŠØŸ</p>
                <div class="alert alert-warning">
                    <strong>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬:</strong> ${product.name}<br>
                    <strong>Ø§Ù„Ù‚Ø³Ù…:</strong> ${product.section}<br>
                    <strong>Ø§Ù„Ø³Ø¹Ø±:</strong> ${product.price} Ù„.Ø³
                </div>
                <p class="text-danger"><i class="fas fa-exclamation-triangle"></i> Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.</p>
            `;
            
            document.getElementById('confirmActionBtn').onclick = () => deleteProduct(index);
            
            const modal = new bootstrap.Modal(document.getElementById('confirmationModal'));
            modal.show();
        }
        
        async function deleteProduct(index) {
            try {
                const response = await fetchGitHubFile(CONFIG.PATHS.PRODUCTS);
                const products = response.data;
                const sha = response.sha;
                
                // Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„ÙØ¹Ù„ÙŠ ÙÙŠ Ø§Ù„Ù…ØµÙÙˆÙØ©
                const productList = products.filter(p => p.kind === 'product');
                const productToDelete = productList[index];
                const deleteIndex = products.indexOf(productToDelete);
                
                if (deleteIndex !== -1) {
                    products.splice(deleteIndex, 1);
                    await saveGitHubFile(CONFIG.PATHS.PRODUCTS, products, sha);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                    productsData = products;
                    
                    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                    bootstrap.Modal.getInstance(document.getElementById('confirmationModal')).hide();
                    updateStatistics();
                    loadProducts();
                    
                    showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                }
            } catch (error) {
                console.error('Error deleting product:', error);
                showAlert('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬', 'danger');
            }
        }
        
        function showDeleteProductModal() {
            const modal = new bootstrap.Modal(document.getElementById('deleteProductModal'));
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
            document.getElementById('searchProduct').addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const resultsContainer = document.getElementById('productSearchResults');
                const products = productsData.filter(p => p.kind === 'product');
                
                const filteredProducts = products.filter(product => 
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.section.toLowerCase().includes(searchTerm) ||
                    product.type.toLowerCase().includes(searchTerm)
                );
                
                resultsContainer.innerHTML = '';
                
                if (filteredProducts.length === 0) {
                    resultsContainer.innerHTML = '<div class="alert alert-info">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>';
                    return;
                }
                
                filteredProducts.forEach((product, index) => {
                    const productIndex = products.indexOf(product);
                    const productCard = `
                        <div class="card mb-2">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="card-title mb-1">${product.name}</h6>
                                        <p class="card-text mb-1 small">
                                            <span class="badge bg-secondary">${product.section}</span>
                                            <span class="badge bg-info">${product.type}</span>
                                            <span class="badge bg-success">${product.price} Ù„.Ø³</span>
                                        </p>
                                    </div>
                                    <button class="btn btn-sm btn-danger" onclick="deleteProductConfirm(${productIndex})">
                                        <i class="fas fa-trash"></i> Ø­Ø°Ù
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    resultsContainer.innerHTML += productCard;
                });
            });
            
            modal.show();
        }
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø© ==========
        function loadFeaturedShops() {
            const tableBody = document.getElementById('featured-table-body');
            
            tableBody.innerHTML = '';
            
            featuredShopsData.forEach((shop, index) => {
                const row = `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${shop.name || ''}</td>
                        <td>
                            ${shop.photo ? `
                                <img src="${shop.photo}" alt="${shop.name}" class="featured-img" 
                                     onerror="this.src='https://via.placeholder.com/80/6f42c1/ffffff?text=â­'">
                            ` : 'Ø¨Ø¯ÙˆÙ† ØµÙˆØ±Ø©'}
                        </td>
                        <td>${shop.description ? shop.description.substring(0, 50) + '...' : ''}</td>
                        <td>${shop.added_date ? new Date(shop.added_date).toLocaleDateString('ar-SA') : ''}</td>
                        <td>
                            <button class="btn btn-sm btn-danger" onclick="deleteFeaturedShopConfirm(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }
        
        function showAddFeaturedModal() {
            const modal = new bootstrap.Modal(document.getElementById('addFeaturedModal'));
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            document.getElementById('addFeaturedForm').reset();
            
            modal.show();
        }
        
        async function saveFeaturedShop() {
            const featuredShop = {
                id: Date.now().toString(),
                name: document.getElementById('featuredName').value,
                photo: document.getElementById('featuredPhoto').value,
                description: document.getElementById('featuredDescription').value,
                added_date: new Date().toISOString(),
                active: true
            };
            
            // Ø¥Ø¶Ø§ÙØ© Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø±Ø¨Ø· Ø¨Ø§Ù„Ù…Ø­Ù„ Ø¥Ø°Ø§ ØªÙ… Ø¥Ø¯Ø®Ø§Ù„Ù‡Ø§
            const section = document.getElementById('featuredSection').value;
            const shopName = document.getElementById('featuredShopName').value;
            
            if (section) {
                featuredShop.section = section;
            }
            
            if (shopName) {
                featuredShop.shop_name = shopName;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            if (!featuredShop.name || !featuredShop.photo || !featuredShop.description) {
                showAlert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'warning');
                return;
            }
            
            try {
                const response = await fetchGitHubFile(CONFIG.PATHS.FEATURED_SHOPS);
                const featuredShops = response.data;
                const sha = response.sha;
                
                featuredShops.push(featuredShop);
                await saveGitHubFile(CONFIG.PATHS.FEATURED_SHOPS, featuredShops, sha);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                featuredShopsData = featuredShops;
                
                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                bootstrap.Modal.getInstance(document.getElementById('addFeaturedModal')).hide();
                updateStatistics();
                loadFeaturedShops();
                
                showAlert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ù…Ù…ÙŠØ² Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                console.error('Error saving featured shop:', error);
                showAlert('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ù…Ù…ÙŠØ²', 'danger');
            }
        }
        
        function deleteFeaturedShopConfirm(index) {
            const shop = featuredShopsData[index];
            
            if (!shop) return;
            
            document.getElementById('confirmationTitle').textContent = 'ØªØ£ÙƒÙŠØ¯ Ø­Ø°Ù Ù…Ø­Ù„ Ù…Ù…ÙŠØ²';
            document.getElementById('confirmationBody').innerHTML = `
                <p>Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ù…Ù…ÙŠØ² Ø§Ù„ØªØ§Ù„ÙŠØŸ</p>
                <div class="alert alert-warning">
                    <strong>Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„:</strong> ${shop.name}<br>
                    <strong>Ø§Ù„ÙˆØµÙ:</strong> ${shop.description ? shop.description.substring(0, 100) + '...' : 'Ø¨Ø¯ÙˆÙ† ÙˆØµÙ'}
                </div>
                <p class="text-danger"><i class="fas fa-exclamation-triangle"></i> Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.</p>
            `;
            
            document.getElementById('confirmActionBtn').onclick = () => deleteFeaturedShop(index);
            
            const modal = new bootstrap.Modal(document.getElementById('confirmationModal'));
            modal.show();
        }
        
        async function deleteFeaturedShop(index) {
            try {
                const response = await fetchGitHubFile(CONFIG.PATHS.FEATURED_SHOPS);
                const featuredShops = response.data;
                const sha = response.sha;
                
                featuredShops.splice(index, 1);
                await saveGitHubFile(CONFIG.PATHS.FEATURED_SHOPS, featuredShops, sha);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                featuredShopsData = featuredShops;
                
                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                bootstrap.Modal.getInstance(document.getElementById('confirmationModal')).hide();
                updateStatistics();
                loadFeaturedShops();
                
                showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ù…Ù…ÙŠØ² Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                console.error('Error deleting featured shop:', error);
                showAlert('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ù…Ù…ÙŠØ²', 'danger');
            }
        }
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ==========
        async function toggleAdsStatus() {
            try {
                const response = await fetchGitHubFile(CONFIG.PATHS.SETTINGS);
                const settings = response.data;
                const sha = response.sha;
                
                // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©
                const currentMode = settings.header_mode || 'welcome';
                const newMode = currentMode === 'ads' ? 'welcome' : 'ads';
                
                settings.header_mode = newMode;
                settings.last_updated = new Date().toISOString();
                
                await saveGitHubFile(CONFIG.PATHS.SETTINGS, settings, sha);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                settingsData = settings;
                updateStatistics();
                
                const statusText = newMode === 'ads' ? 'Ù…ÙØ¹Ù„Ø©' : 'Ù…Ø¹Ø·Ù„Ø©';
                showAlert(`ØªÙ… ${newMode === 'ads' ? 'ØªÙØ¹ÙŠÙ„' : 'ØªØ¹Ø·ÙŠÙ„'} Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ (${statusText})`, 'success');
            } catch (error) {
                console.error('Error toggling ads:', error);
                showAlert('Ø®Ø·Ø£ ÙÙŠ ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª', 'danger');
            }
        }
        
        // ========== ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© ==========
        function refreshData() {
            showAlert('Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', 'info');
            loadAllData();
        }
        
        // ========== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© ==========
        document.addEventListener('DOMContentLoaded', function() {
            initTelegramWebApp();
        });
    </script>
</body>
</html>