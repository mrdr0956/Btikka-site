<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù…ØªØ¬Ø± Ø¨ØªÙƒØ© ğŸ›ï¸ (BTikka)</title>
  <style>
    :root {
      --bg: #0f0f12;
      --card: #17171c;
      --muted: #b6b7c0;
      --text: #ffffff;
      --accent1: #e91e63;
      --accent2: #7c4dff;
      --accent3: #00c2ff;
      --border: #2a2a31;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: "Tahoma", system-ui, sans-serif; direction: rtl; background: var(--bg); color: var(--text);
    }
    header {
      padding: 40px 20px;
      background: radial-gradient(1000px 500px at 10% 10%, rgba(124,77,255,.25), transparent),
                  radial-gradient(800px 400px at 90% 20%, rgba(233,30,99,.25), transparent),
                  linear-gradient(135deg, #141419, #0f0f12 60%);
      text-align: center;
      border-bottom: 1px solid var(--border);
    }
    .brand {
      display: inline-flex; align-items: center; gap: 10px; margin-bottom: 12px;
      font-weight: 700; letter-spacing: .5px;
    }
    .brand-badge {
      background: linear-gradient(135deg, var(--accent1), var(--accent2));
      color: #fff; padding: 6px 12px; border-radius: 999px; font-size: 12px;
      box-shadow: 0 8px 30px rgba(233,30,99,.25);
    }
    h1 { margin: 0 0 8px; font-size: 28px; }
    .lead { margin: 4px 0; color: var(--muted); }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px; }
    .sections {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 16px; margin-top: 18px;
    }
    .section-card {
      background: linear-gradient(180deg, #191922, #15151b);
      border: 1px solid var(--border);
      border-radius: 14px; padding: 18px; cursor: pointer; text-align: center;
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
      position: relative; overflow: hidden;
    }
    .section-card::before {
      content: ""; position: absolute; inset: -1px;
      background: linear-gradient(135deg, rgba(124,77,255,.15), rgba(0,194,255,.08));
      opacity: 0; transition: opacity .25s ease;
    }
    .section-card:hover { transform: translateY(-4px); border-color: #3b3b45; }
    .section-card:hover::before { opacity: 1; }
    .section-title { font-size: 15px; margin: 0; color: #eaeaf3; }
    .products-header {
      display: flex; align-items: center; justify-content: space-between;
      margin-top: 28px; margin-bottom: 12px;
    }
    .products-header h2 { margin: 0; font-size: 20px; }
    .refresh {
      background: linear-gradient(135deg, var(--accent3), var(--accent2));
      color: #091015; border: none; border-radius: 10px; padding: 8px 12px; cursor: pointer;
      font-weight: 600; box-shadow: 0 8px 24px rgba(124,77,255,.25);
    }
    .products {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 18px;
    }
    .card {
      background: var(--card); border: 1px solid var(--border); border-radius: 14px;
      overflow: hidden; transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    }
    .card:hover { transform: translateY(-3px); border-color: #3b3b45; box-shadow: 0 10px 28px rgba(0,0,0,.35); }
    .thumb {
      width: 100%; height: 160px; object-fit: cover; background: #0d0d11;
    }
    .content { padding: 12px; }
    .name { margin: 4px 0 2px; font-size: 16px; }
    .desc { margin: 4px 0 8px; font-size: 13px; color: var(--muted); min-height: 36px; }
    .price {
      display: inline-block; font-weight: 700; color: #ff77a9; background: rgba(233,30,99,.08);
      border: 1px solid rgba(233,30,99,.25); border-radius: 8px; padding: 6px 10px;
    }
    .empty {
      color: var(--muted); background: #141419; border: 1px dashed #34343b;
      border-radius: 12px; padding: 16px; text-align: center; grid-column: 1 / -1;
    }
    footer { text-align: center; color: var(--muted); padding: 24px 12px; }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <span class="brand-badge">BTikka</span>
      <span>Ù…ØªØ¬Ø± Ù…ÙˆØ«ÙˆÙ‚ Ù„Ù„ØªØ³ÙˆÙ‚ Ø§Ù„Ø³Ø±ÙŠØ¹</span>
    </div>
    <h1>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù…ØªØ¬Ø± Ø¨ØªÙƒØ© ğŸ›ï¸ (BTikka)</h1>
    <p class="lead">ÙˆØ¬Ù‡ØªÙƒ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ù„ØªØ³ÙˆÙ‚ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ±Ø§Ø­Ø© âœ¨</p>
    <p class="lead">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ù„ØªØ³ÙˆÙ‚ Ù…Ù†Ù‡ ğŸ‘‡</p>
  </header>

  <div class="container">
    <div class="sections" id="sections"></div>

    <div class="products-header">
      <h2 id="current-section">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
      <button class="refresh" id="refresh">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
    </div>

    <div class="products" id="products"></div>
  </div>

  <footer>Â© BTikka â€” ØªØ³ÙˆÙ‚Ùƒ Ø£Ø³Ù‡Ù„ Ù…Ø¹Ù†Ø§</footer>

  <script>
    const SECTIONS = [
      "Ù…Ø·Ø§Ø¹Ù… ÙˆØ­Ù„ÙˆÙŠØ§Øª",
      "Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª â€“ Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©",
      "Ø£Ø¯ÙˆØ§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©",
      "Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©",
      "Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„Ù…Ø§Ø¦Ø¯Ø© ÙˆØ§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ§Øª",
      "Ù‡Ø¯Ø§ÙŠØ§ Ù…Ù…ÙŠØ²Ø©",
      "Ù…ÙˆØ§Ø¯ Ø¨Ù†Ø§Ø¡ ÙˆØªØ´Ø·ÙŠØ¨"
    ];

    const secEl = document.getElementById("sections");
    const prodEl = document.getElementById("products");
    const titleEl = document.getElementById("current-section");
    const refreshBtn = document.getElementById("refresh");

    // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙƒØ¨Ø·Ø§Ù‚Ø§Øª
    SECTIONS.forEach(sec => {
      const card = document.createElement("div");
      card.className = "section-card";
      card.innerHTML = `<p class="section-title">${sec}</p>`;
      card.onclick = () => showProducts(sec);
      secEl.appendChild(card);
    });

    // ÙƒØ³Ø± Ø§Ù„ÙƒØ§Ø´ Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù…Ù„ Ø²Ù…Ù†ÙŠ Ù„ÙƒÙ„ Ø·Ù„Ø¨
    async function fetchProductsJson() {
      const url = `products.json?ts=${Date.now()}`;
      const res = await fetch(url, { cache: "no-store" });
      if (!res.ok) throw new Error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª");
      return await res.json();
    }

    async function showProducts(section) {
      titleEl.textContent = `Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª â€” ${section}`;
      prodEl.innerHTML = "";

      try {
        const products = await fetchProductsJson();
        const filtered = products.filter(p => (p.section || "").trim() === section.trim());

        if (filtered.length === 0) {
          prodEl.innerHTML = `<div class="empty">âœ¨ Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ø³ÙˆÙ ØªÙ†Ø²Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù‚Ø³Ù… "${section}" âœ¨</div>`;
          return;
        }

        filtered.forEach(p => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <img class="thumb" src="${p.photo}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/400x300/141419/ffffff?text=BTikka'">
            <div class="content">
              <h3 class="name">${p.name}</h3>
              <p class="desc">${p.description || ""}</p>
              <span class="price">Ø§Ù„Ø³Ø¹Ø±: ${p.price} Ù„.Ø³</span>
            </div>
          `;
          prodEl.appendChild(card);
        });

        // ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø³Ù„Ø§Ø³Ø©
        prodEl.scrollIntoView({ behavior: "smooth", block: "start" });
      } catch (err) {
        prodEl.innerHTML = `<div class="empty">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª. Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ù‹Ø§.</div>`;
        console.error(err);
      }
    }

    // Ø²Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù„ÙƒØ³Ø± Ø§Ù„ÙƒØ§Ø´ ÙŠØ¯ÙˆÙŠÙ‹Ø§
    refreshBtn.onclick = () => {
      if (titleEl.textContent.includes("â€”")) {
        const section = titleEl.textContent.split("â€”")[1].trim();
        showProducts(section);
      } else {
        // Ø¥Ù† Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù‚Ø³Ù…ØŒ Ù„Ø§ Ù†ÙØ¹Ù„ Ø´ÙŠØ¦Ù‹Ø§
      }
    };
  </script>
</body>
</html>
